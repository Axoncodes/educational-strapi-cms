"use strict";(self.webpackChunkcms=self.webpackChunkcms||[]).push([[8503],{31346:(M,m,t)=>{t.r(m),t.d(m,{default:()=>U});var e=t(67294),n=t(86896),E=t(41054),s=t(86597),u=t(185),v=t(53979),y=t(29728),A=t(49066),P=t(41580),T=t(11047),l=t(75515),g=t(11276),h=t(74571),a=t(20707),i=t(16364),r=t(85018),o=t(8934),c=t(94123),f=t(80826),d=t(93742),R=t(4733),x=t(88972),S=t(25752);const b=(0,x.ZP)(S.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:p})=>p.colors.neutral600};
    }
  }
`;var D=t(87561);const w=D.Ry().shape({restrictedAccess:D.O7(),password:D.Z_().when("restrictedAccess",(p,L)=>p?L.required(s.I0.required):L)}),U=()=>{(0,s.go)();const{formatMessage:p}=(0,n.Z)(),{submitMutation:L,data:I,isLoading:K}=(0,R.Z)(),[B,$]=(0,e.useState)(!1),F=C=>{L.mutate({prefix:I?.prefix,body:C})};return e.createElement(u.o,null,K?e.createElement(s.dO,null,"Plugin settings are loading"):e.createElement(E.J9,{initialValues:{restrictedAccess:I?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:F,validationSchema:w},({handleSubmit:C,values:O,handleChange:Q,errors:Z,setFieldTouched:H,setFieldValue:W})=>e.createElement(s.l0,{noValidate:!0,onSubmit:C},e.createElement(v.T,{title:p({id:(0,d.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:p({id:(0,d.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(s.jW,{permissions:f.Z.update},e.createElement(y.z,{type:"submit",startIcon:e.createElement(r.Z,null)},p({id:(0,d.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),e.createElement(A.D,null,e.createElement(P.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(T.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(l.Z,{variant:"delta",as:"h2"},p({id:"global.settings",defaultMessage:"Settings"})),e.createElement(g.r,{gap:4},e.createElement(h.P,{col:6,s:12},e.createElement(a.s,{name:"restrictedAccess",label:p({id:(0,d.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:p({id:(0,d.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:O.restrictedAccess,onChange:()=>{O.restrictedAccess===!0&&(W("password","",!1),H("password",!1,!1)),W("restrictedAccess",!O.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),O.restrictedAccess&&e.createElement(h.P,{col:6,s:12},e.createElement(i.o,{label:p({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:B?"text":"password",value:O.password,onChange:Q,error:Z.password?p({id:Z.password,defaultMessage:"Invalid value"}):null,endAction:e.createElement(b,{onClick:z=>{z.stopPropagation(),$(j=>!j)},label:p(B?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},B?e.createElement(o.Z,null):e.createElement(c.Z,null))})))))))))}},4733:(M,m,t)=>{t.d(m,{Z:()=>T});var e=t(88767),n=t(86597),E=t(49950);const s=({prefix:l,version:g})=>(0,n.WY)(`${l}/deleteDoc/${g}`,{method:"DELETE"}),u=async l=>{try{return await(0,n.WY)(`/${E.Z}/getInfos`,{method:"GET"})}catch{return l({type:"warning",message:{id:"notification.error"}}),null}},v=({prefix:l,version:g})=>(0,n.WY)(`${l}/regenerateDoc`,{method:"POST",body:{version:g}}),y=({prefix:l,body:g})=>(0,n.WY)(`${l}/updateSettings`,{method:"PUT",body:g});var A=t(798);const T=()=>{const l=(0,e.useQueryClient)(),g=(0,n.lm)(),{isLoading:h,data:a}=(0,e.useQuery)("get-documentation",()=>u(g)),i=d=>{g({type:"warning",message:d.response.payload.message})},r=(d,R)=>{l.invalidateQueries("get-documentation"),g({type:d,message:{id:(0,A.Z)(R)}})},o=(0,e.useMutation)(s,{onSuccess:()=>r("info","notification.delete.success"),onError:d=>i(d)}),c=(0,e.useMutation)(y,{onSuccess:()=>r("success","notification.update.success"),onError:i}),f=(0,e.useMutation)(v,{onSuccess:()=>r("info","notification.generate.success"),onError:d=>i(d)});return{data:a,isLoading:h,deleteMutation:o,submitMutation:c,regenerateDocMutation:f}}},798:(M,m,t)=>{t.d(m,{Z:()=>E});var e=t(49950);const E=s=>`${e.Z}.${s}`},93742:(M,m,t)=>{t.d(m,{O:()=>e.Z});var e=t(798)},49066:(M,m,t)=>{t.d(m,{D:()=>s});var e=t(67294),n=t(45697),E=t(41580);const s=({children:u})=>e.createElement(E.x,{paddingLeft:10,paddingRight:10},u);s.propTypes={children:n.node.isRequired}},53979:(M,m,t)=>{t.d(m,{A:()=>h,T:()=>l});var e=t(67294),n=t(45697),E=t(88972),s=t(41580),u=t(11047);const v=a=>{const i=(0,e.useRef)(null),[r,o]=(0,e.useState)(!0),c=([f])=>{o(f.isIntersecting)};return(0,e.useEffect)(()=>{const f=i.current,d=new IntersectionObserver(c,a);return f&&d.observe(i.current),()=>{f&&d.disconnect()}},[i,a]),[i,r]};var y=t(95355);const A=(a,i)=>{const r=(0,y.W)(i);(0,e.useLayoutEffect)(()=>{const o=new ResizeObserver(r);return Array.isArray(a)?a.forEach(c=>{c.current&&o.observe(c.current)}):a.current&&o.observe(a.current),()=>{o.disconnect()}},[a,r])};var P=t(75515);const T=()=>{const a=(0,e.useRef)(null),[i,r]=(0,e.useState)(null),[o,c]=v({root:null,rootMargin:"0px",threshold:0});return A(o,()=>{o.current&&r(o.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&r(a.current.getBoundingClientRect())},[a]),{containerRef:o,isVisible:c,baseHeaderLayoutRef:a,headerSize:i}},l=a=>{const{containerRef:i,isVisible:r,baseHeaderLayoutRef:o,headerSize:c}=T();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:c?.height},ref:i},r&&e.createElement(h,{ref:o,...a})),!r&&e.createElement(h,{...a,sticky:!0,width:c?.width}))};l.displayName="HeaderLayout";const g=(0,E.ZP)(s.x)`
  width: ${a=>a.width}px;
`,h=e.forwardRef(({navigationAction:a,primaryAction:i,secondaryAction:r,subtitle:o,title:c,sticky:f,width:d,...R},x)=>{const S=typeof o=="string";return f?e.createElement(g,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:d,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(u.k,{justifyContent:"space-between"},e.createElement(u.k,null,a&&e.createElement(s.x,{paddingRight:3},a),e.createElement(s.x,null,e.createElement(P.Z,{variant:"beta",as:"h1",...R},c),S?e.createElement(P.Z,{variant:"pi",textColor:"neutral600"},o):o),r?e.createElement(s.x,{paddingLeft:4},r):null),e.createElement(u.k,null,i?e.createElement(s.x,{paddingLeft:2},i):void 0))):e.createElement(s.x,{ref:x,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:a?6:8,background:"neutral100","data-strapi-header":!0},a?e.createElement(s.x,{paddingBottom:2},a):null,e.createElement(u.k,{justifyContent:"space-between"},e.createElement(u.k,{minWidth:0},e.createElement(P.Z,{as:"h1",variant:"alpha",...R},c),r?e.createElement(s.x,{paddingLeft:4},r):null),i),S?e.createElement(P.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},o):o)});h.displayName="BaseHeaderLayout",h.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},h.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,sticky:n.bool,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired,width:n.number},l.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},l.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired}},185:(M,m,t)=>{t.d(m,{o:()=>u});var e=t(67294),n=t(45697),E=t(88972);const s=E.ZP.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,u=({labelledBy:v,...y})=>{const A=v||"main-content-title";return e.createElement(s,{"aria-labelledby":A,id:"main-content",tabIndex:-1,...y})};u.defaultProps={labelledBy:void 0},u.propTypes={labelledBy:n.string}}}]);
